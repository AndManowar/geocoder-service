## Принцип работы админки для фронта 
1.  При загрузке страницы постучатся на "РОУТ" и получить список регионов для селекта
2.  Селекты будут строится динамически. При выборе текущего значения селекта, делается запрос `GET /admin/get-children/{globId}` для получения тайтла, значений и доступных типо сущностей для следующего селекта.
3.  При сабмите формы отправляется на `POST /admin/object`/`PUT /admin/object/{id}`...

## API методы
* [Получение отфильтрованных записей с пагинацией](#Получение-отфильтрованных-записей-с-пагинацией)
* [Получение списка типов для селекта](#Получение-списка-типов-для-селекта)
* [Получение объекта](#Получение-объекта)
* [Создание объекта](#Создание-объекта)
* [Обновление объекта](#Обновление-объекта)
* [Мягкое удаление объекта](#Мягкое-удаление-объекта)
* [Восстановление объекта](#Восстановление-объекта)
* [Получение типа объекта](#Получение-типа-объекта)
* [Создание типа объекта](#Создание-типа-объекта)
* [Обновление типа объекта](#Обновление-типа-объекта)
* [Мягкое удаление типа объекта](#Мягкое-удаление-типа-объекта)
* [Восстановление типа объекта](#Восстановление-типа-объекта)
* [Получение списка детей для селекта](#Получение-списка-детей-для-селекта)
* [Создание народного района](#Создание-народного-района)
* [Обновление народного района](#Обновление-народного-района)
* [Создание привязки народного района к формальному](#Создание-привязки-народного-района-к-формальному)
* [Обновление привязки народного района к формальному](#Обновление-привязки-народного-района-к-формальному)
* [Удаление привязки народного района к формальному](#Удаление-привязки-народного-района-к-формальному)
* [Получение списка регионов для селекта](#Получение-списка-регионов-для-селекта)
* [Получение направления](#Получение-направления)
* [Создание направления](#Создание-направления)
* [Обновление направления](#Обновление-направления)
* [Удаление направления](#Удаление-направления)
* [Восстановление направления](#Восстановление-направления)
* [Получение пагинированного списка метро](#Получение-пагинированного-списка-метро)
* [Получение объекта метро](#Получение-объекта-метро)
* [Создание метро](#Создание-метро)
* [Обновление метро](#Обновление-метро)
* [Удаление метро](#Удаление-метро)
* [Восстановление метро](#Восстановление-метро)
* [Получение линий метро для селекта](#Получение-линий-метро-для-селекта)
* [Получение линии метро](#Получение-линии-метро)
* [Создание линии метро](#Создание-линии-метро)
* [Обновление линии метро](#Обновление-линии-метро)
* [Удаление линии метро](#Удаление-линии-метро)
* [Восстановление линии метро](#Восстановление-линии-метро)

Получение отфильтрованных записей с пагинацией
----

    GET /admin/objects
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание            | Обязательный  |
| ---------- | -------------- | ------------------- | ------------- |
| `page`     | `integer`      |  Текущая страница   | да            |
| `size`     | `integer`      |  Количество записей на странице   | нет|
| `type`     | `integer`      |  Тип сущности       |    да         |
| `name`     | `string`      |  Фильтрация по имени объекта   | нет            |
| `region_id` | `integer`      | Регион для фильтрации   | нет            |
| `county_id` | `integer`      | Округ для фильтрации   | нет            |
| `city_id` | `integer`      | Населенный пункт для фильтрации   | нет            |
| `city_district_id` | `integer`      | Район населенного пункта для фильтрации   | нет            |

***Успех:***

	```json
    {
        "status": "success",
        "data": {
            "items": [
                {
                   "id": "551675",
                   "region_id": "3",
                   "glob_id": "7a968401-982b-4c6b-8e78-dd90bd303803",
                   "full_name": "Цветная",
                   "parents_names": null,
                   "parents_levels": null,
                   "is_edited": "0"
               },
               {
                   "id": "551676",
                   "region_id": "50",
                   "glob_id": "c83a4774-3c18-4a26-b872-7c2413ed037e",
                   "full_name": "сектор 4",
                   "parents_names": "[\"Московская\", \"Орехово-Зуевский\", \"Большая Дубна\", \"ДНТ Старт-2\"]",
                   "parents_levels": "[\"1\", \"3\", \"6\", \"65\"]",
                   "is_edited": "0"
               },
            ],
            "page": "2",
            "pageSize": "2",
            "totalPages": 136,
            "totalCount": "271"
        }
    }
    ```

Получение списка типов для селекта
----

    GET /admin/object/{type}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание            | Обязательный  |
| ---------- | -------------- | ------------------- | ------------- |
| `type`        | `integer`       | Тип создаваемого объекта (1-5)    | да            |

***Примечание:***
Для типа 1 и 2 (округ и район) не нужно вызывать метод, он вернет пустой массив.
Для них type_id проставится автоматически.

***Успех:***

	Запись объекта из базы данных

```json

{
    "status": "success",
    "data": [
        {
            "id": "13",
            "name": "волость"
        },
        {
            "id": "14",
            "name": "г"
        },
        {
            "id": "15",
            "name": "г."
        },
        {
            "id": "16",
            "name": "дп"
        },
        ...
    ]
}
```

Получения объекта по id
----

    GET /admin/object/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание            | Обязательный  |
| ---------- | -------------- | ------------------- | ------------- |
| `id`        | `integer`       | id объекта           | да            |

***Успех:***

	Запись объекта из базы данных
	
***Ошибка:***

	Object with id {$id} not found!


Создание объекта
----

    POST /admin/object
    
***Параметры запроса (`application/json`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `name`        | `string`                  | Имя объекта                                        | да            |
| `type`        | `int`                     | Тип сущности, которая в данный момент создается    | да           |
| `type_id`     | `int`                     | Тип объекта (улица/район/н.п. ...)                 | да           |
| `parentData`  | `array`                   | Данные о предках текущего добавляемого объекта     | да           |

***Успех:***

```json
{
    "status": "success"
}
```

> **Примечание:** `parentData` - массив значений всех выбранных glob_id селектов.
Передается в виде:

       "parentData": [
       {"glob_id":77},
       {"glob_id":"#someHash"},
       ...
       ] 
	
***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Обновление объекта
----

    PUT /admin/object/{id}
    
***Параметры запроса (`raw`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `id`          | `integer`                  | id объекта                                        | да            |
| `name`        | `string`                  | Имя объекта                                        | да            |
| `type`     | `int`                     | Тип сущности, которая в данный момент редиктируется| да           |
| `type_id`     | `int`                     | Тип объекта (улица/район/н.п. ...)                 | нет          |
| `parentData`  | `array`                   | Данные о предках текущего добавляемого объекта     | да           |

***Успех:***

```json
{
    "status": "success"
}
```

> **Примечание:** `parentData` - массив значений всех выбранных glob_id селектов.
Передается в виде:

       parentData = [
            ['glob_id' => '77'],    
            ['glob_id' => '#somehash#'],   
            ['glob_id' => '#somehash#']   
       ]
	
***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Мягкое удаление объекта
----

    DELETE /admin/object/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`     | `integer`       | id объекта    | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error"
}
```

Восстановление удаленного объекта
----

    GET /admin/object/recover/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id объекта   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error"
}
```

Получение списка детей по родителю для подстановки в селект
----

    GET /admin/get-children/{globId}/{type}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `globId`   | `string`       | glob_id объекта   | да            |
| `type`   | `integer`       | Тип объекта, который в данный момент создается   | да            |

***Успех:***

```json
{
    "status": "success",
    "data": [
        "title": "Город",
        "types": [
               {
                 "id" : 22,
                 "name": "г."
               },
               ...
        ],
        
        "items": [
              {
                  "glob_id": "10409e98-eb2d-4a52-acdd-7166ca7e0e48",
                  "name": "Вороновское"
              },
              ...
        ]
    ]
}
```

> **Примечание:** `title` - тайтл следующего селекта


Создание народного района
----

    POST /admin/folk-district
    
***Параметры запроса (`application/json`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `name`        | `string`                  | Имя объекта                                        | да            |
| `type_id`     | `int`                     | Тип объекта (улица/район/н.п. ...)                 | да           |
| `parentData`  | `array`                   | Данные о предках текущего добавляемого объекта     | да           |

***Успех:***

```json
{
    "status": "success"
}
```

> **Примечание:** `parentData` - массив значений всех выбранных glob_id селектов.
Передается в виде:

       parentData = [
            ['glob_id' => '77'],    
            ['glob_id' => '#somehash#'],   
            ['glob_id' => '#somehash#']   
       ]
	
***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Обновление народного района
----

    PUT /admin/folk-district/{id}
    
***Параметры запроса (`raw`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `id`        | `integer`                  | id объекта                                        | да            |
| `name`        | `string`                  | Имя объекта                                        | да            |
| `type_id`     | `int`                     | Тип объекта (улица/район/н.п. ...)                 | да           |
| `parentData`  | `array`                   | Данные о предках текущего добавляемого объекта     | да           |

***Успех:***

```json
{
    "status": "success"
}
```

> **Примечание:** `parentData` - массив значений всех выбранных glob_id селектов.
Передается в виде:

       parentData = [
            ['glob_id' => '77'],    
            ['glob_id' => '#somehash#'],   
            ['glob_id' => '#somehash#']   
       ]
	
***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Создание привязки народного района к формальному
----

    POST /admin/folk-district/mapping
    
***Параметры запроса (`application/json`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `folk_district_glob_id`      | `string` | glob_id народного района          | да            |
| `formal_district_glob_id`     | `string`  | glob_id формального района      | да           |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Обновление привязки народного района к формальному
----

    PUT /admin/folk-district/mapping/{id}
    
***Параметры запроса (`raw`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `folk_district_glob_id`      | `string` | glob_id народного района          | да            |
| `formal_district_glob_id`     | `string`  | glob_id формального района      | да           |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Удаление привязки народного района к формальному
----

    DELETE /admin/folk-district/mapping/{id}
    
***Параметры запроса:***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `id`          | `integer`                 | id записи                                          | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error"
}
```

Получения типа объекта по id
----

    GET /admin/type/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание            | Обязательный  |
| ---------- | -------------- | ------------------- | ------------- |
| `id`        | `integer`       | id типа           | да            |

***Успех:***

	Запись объекта из базы данных
	
***Ошибка:***

	Object with id {$id} not found!

Создание типа объекта
----

    POST /admin/type
    
***Параметры запроса (`application/json`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `name`        | `string`                  | Название                                           | да            |
| `level`       | `integer`                 | Уровень                                            | да           |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Обновление типа объекта
----

    PUT /admin/type/{id}
    
***Параметры запроса (`application/json`):***

| Поле          | Тип параметра             | Описание                                           | Обязательный  |
| ------------- | ------------------------- | -------------------------------------------------- | ------------- |
| `id`          | `integer`                 | id записи                                           | да            |
| `name`        | `string`                  | Название                                           | да            |
| `level`       | `integer`                 | Уровень                                            | да           |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error",
    "error": ["Ошибки валидации."]
}
```

Мягкое удаление типа объекта
----

    DELETE /admin/type/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`     | `integer`       | id объекта    | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error"
}
```

Восстановление удаленного типа объекта
----

    GET /admin/type/recover/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id объекта   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***

```json
{
    "status": "error"
}
```

Получение списка регионов для селекта
----

    GET /admin/get-regions

***Успех:***

```json
{
    "status": "success",
    "data": [
        "types": [
               {
                 "id" : 22,
                 "name": "г."
               },
               ...
        ],
        
        "items": [
              {
                  "glob_id": "77",
                  "name": "Москва"
              },
              ...
        ]
    ]
}

```
Получение направления
----

    GET /admin/direction/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id направления   | да            |

***Успех:***

```json
{
    "status": "success",
    "data": {
        "id": "1",
        "region_id": "77",
        "name": "test",
        "status": "0"
    }
}
```

***Ошибка:***
Direction with {id} Not Found

Создание направления
----

    POST /admin/direction
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `region_id`       | `integer`      | id региона   | да            |
| `name`       | `string`      | название направления   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Direction with {id} Not Found, 
validation errors

Обновление направления
----

    PUT /admin/direction/{id}
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id объекта   | да            |
| `region_id`       | `integer`      | id региона   | да            |
| `name`       | `string`      | название направления   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Direction with {id} Not Found
validation errors

Мягкое удаление направления
----

    DELETE /admin/direction/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id направления   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Direction with {id} Not Found

Восстановление направления
----

    GET /admin/direction/recover/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id направления   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Direction with {id} Not Found

Получение пагинированного списка метро
----

    GET /admin/metros
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `region_id`       | `integer`      | id региона   | нет            |
| `city_id`       | `integer`      | id населенного пункта   | нет            |
| `metro_line_id`       | `integer`      | id линии метро   | нет            |
| `station_name`       | `string`      | id региона   | нет            |

***Успех:***

```json
{
"status": "success",
    "data": {
        "items": [
            {
                "id": "49",
                "station_name": "Test station",
                "line_name": "Тест ветка",
                "line_color": "green",
                "keywords": "test, test1, test2",
                "region_id": "77",
                "city_id": null
            }
        ],
        "page": 1,
        "pageSize": 25,
        "totalPages": 1,
        "totalCount": "3"
    }
}
```

Получение объекта метро
----

    GET /admin/metro/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id метро   | да            |

***Успех:***

```json
{
    "status": "success",
    "data": {
        "id": "49",
        "metro_line_id": "1",
        "line_name": "Тест ветка",
        "region_id": "77",
        "city_id": null,
        "color": "green",
        "station_name": "Test station",
        "status": "1",
        "keywords": [
            {
                "id": "5",
                "metro_id": "49",
                "keyword": "test1"
            },
            {
                "id": "6",
                "metro_id": "49",
                "keyword": "test2"
            },
            {
                "id": "7",
                "metro_id": "49",
                "keyword": "test3"
            }
        ]
    }
}
```

***Ошибка:***
Metro with {id} Not Found


Создание метро
----

    POST /admin/metro
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `metro_line_id`       | `integer`      | id линии метро   | да            |
| `station_name`       | `string`      | название метро   | да            |
| `keywords`       | `string`      | Ключевые слова (через запятую)   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
validation errors

Обновление метро
----

    PUT /admin/metro/{id}
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id объекта   | да            |
| `metro_line_id`       | `integer`      | id линии метро   | да            |
| `station_name`       | `string`      | название метро   | да            |
| `keywords`            | `string`      | Ключевые слова (через запятую)   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro with {id} Not Found
validation errors



Удаление метро
----

    DELETE /admin/metro/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id метро   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro with {id} Not Found

Восстановление метро
----

    GET /admin/metro/recover/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id метро   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro with {id} Not Found


Получение линий метро для селекта
----

    GET /admin/metro-lines

***Успех:***

```json
{
    "status": "success",
    "data": [
        {
                   "id": "1",
                   "name": "Тест ветка1",
                   "color": "green",
                   "region_id": "77",
                   "city_id": null
               },
               {
                   "id": "2",
                   "name": "Тест ветка2",
                   "color": "red",
                   "region_id": "77",
                   "city_id": null
               },
        ...
    ]
}
```


Получение линии метро
----

    GET /admin/metro-line/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id линии метро   | да            |

***Успех:***

```json
{
    "status": "success",
    "data": {
        "id": "1",
        "region_id": "77",
        "city_id": null,
        "name": "Тест ветка",
        "color": "12[2312[3",
        "status": "1"
    }
}
```

***Ошибка:***
Metro Line with {id} Not Found


Создание линии метро
----

    POST /admin/metro-line
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `region_id`       | `integer`      | id региона   | да            |
| `city_id`       | `string`      | id населенного пункта   | нет            |
| `name`       | `string`      | название линии   | да            |
| `color`       | `string`      | цвет   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
validation errors

Обновление линии метро
----

    PUT /admin/metro-line/{id}
    
***Параметры запроса (`application/json`):***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id линии метро   | да            |
| `region_id`       | `integer`      | id региона   | да            |
| `city_id`       | `string`      | id населенного пункта   | нет            |
| `name`       | `string`      | название линии   | да            |
| `color`       | `string`      | цвет   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro Line with {id} Not Found
validation errors


Удаление метро
----

    DELETE /admin/metro-line/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id линии метро   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro Line with {id} Not Found

Восстановление метро
----

    GET /admin/metro-line/recover/{id}
    
***Параметры запроса:***

| Параметр   | Тип параметра  | Описание     | Обязательный  |
| ---------- | -------------- | ------------ | ------------- |
| `id`       | `integer`      | id линии метро   | да            |

***Успех:***

```json
{
    "status": "success"
}
```

***Ошибка:***
Metro Line with {id} Not Found




